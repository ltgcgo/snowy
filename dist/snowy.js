"use strict";(function(){var h=25e3,a=[],r={},u=function(o,e){var c,s;(c=r[o])!=null&&c.constructor||(r[o]=[]),r[o].indexOf(e)<0&&r[o].push(e),(s=e.ch)!=null&&s.constructor||(e.ch=[]),e.ch.indexOf(o)<0&&e.ch.push(o),console.debug("[Snowy] Subscribed tab to channel ".concat(o,"."))},v=function(o,e){var s,f;if((s=r[o])!=null&&s.constructor){var c=r[o].indexOf(e);c>-1&&r[o].splice(c,1),r[o].length||delete r[o]}if((f=e==null?void 0:e.ch)!=null&&f.constructor){var c=e.ch.indexOf(o);c>-1&&e.ch.splice(c,1)}console.debug("[Snowy] Unsubscribed tab from channel ".concat(o,"."))};addEventListener("connect",function(o){var e=o.source;e.postMessage({t:"swc"}),e.onmessage=function(c){var i,t;var s=c.data,f=!0;switch(s.t){case"k":{var g=a.indexOf(e);for(g<0&&a.push(e),e.lastKa=Date.now();(i=s==null?void 0:s.c)!=null&&i.length;){var d=s.c.pop();u(d,e)}f=!1;break}case"m":{for(var n=0;n<((t=r[s.c])==null?void 0:t.length);n++)r[s.c][n].postMessage(s);break}case"r":{u(s.c,e);break}case"d":{v(s.c,e);break}default:console.error('[Snowy] Unknown message type "'.concat(s.t,'"'))}f&&console.info("SharedWorkerMessage",s)}});setInterval(function(){var f;for(var o=a.length-1;o>=0;o--){var e=a[o];e.postMessage({t:"k"});var c=Date.now();if(e.lastKa+h<c){if(e.postMessage({t:"c"}),(f=e==null?void 0:e.ch)!=null&&f.constructor)for(var s=0;s<e.ch.length;s++)v(e.ch[s],e);a.splice(o,1),console.info("[Snowy] Stopped one tab.")}}},1e4);console.info("[Snowy] Worker is now active.");})();
